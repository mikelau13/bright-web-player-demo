<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            var myPlayer = videojs.getPlayer('vjs_video_3');
            var autoPlayEvents = ['loadedmetadata', 'durationchange'];
            var serverUrl = 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator='; // BC sample pre-roll

            myPlayer.catalog.getVideo("6075421706001", function(error, video) {
                myPlayer.catalog.getPlaylist('1659613093283342265', function (error, endScreenPlaylist) {
                    endScreenPlaylist.unshift(video);
                    myPlayer.playlist(endScreenPlaylist, 0);
                    myPlayer.playlist.autoadvance(5); // Null - Resets and cancels the auto advance
                                       
                    myPlayer.on(autoPlayEvents, autoplayableListener);
                    myPlayer.on("beforeplaylistitem", function() {
                        alert('WWWW');
                    });
                    myPlayer.on('ended', function() {
                        myPlayer.off('ended');
                    });
                });
            });


            function autoplayableListener(event) {
                // for live videos we want to listen for durationchange
                if (event.type === 'durationchange' && myPlayer.duration() === Infinity) {
                    attemptAutoplay();
                    myPlayer.off(autoPlayEvents, autoplayableListener);
                }
                if (event.type === 'loadedmetadata') {
                    attemptAutoplay();
                    myPlayer.off(autoPlayEvents, autoplayableListener);
                }
            }
        
            function attemptAutoplay() {
                var promise = myPlayer.play();
                if (promise !== undefined) {
                    promise.then(function () {
                    // Autoplay started!
                    }).
                    catch (function (error) {
                        alert('Autoplay was prevented, write codes here to handle.');
                    });
                }
            }
        });
    </script>
</head>
<body>
  <h1><a href="playlist02.html">Click to have "user interaction"</a></h1>
  <h2><a href="1650009287581049525.html">Click to watch 1650009287581049525 - Sonic the Hedgehog</a></h2>
  <div class="vjs-playlist-player-container" style="max-width: 960px;">
	<video-js
		data-account="6057949425001"
		data-player="Lvxn0Ms6w"
		data-embed="default"
		controls=""
        data-application-id=""
		class="vjs-fluid">
	</video-js>
  </div>
  <script src="//players.brightcove.net/6057949425001/Lvxn0Ms6w_default/index.min.js"></script>
  <script src="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js"></script>
</body>
</html>
